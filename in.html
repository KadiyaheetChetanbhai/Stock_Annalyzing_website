<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic TradingView Widgets</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="main-content">
    <div class="chart">
      <!-- TradingView Widget BEGIN -->
      <div class="tradingview-widget-container" style="border: 1px solid rgb(0, 0, 0); border-radius: 20px;">
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
          {
            "container_id": "analytics-platform-chart-demo",
            "width": "100%",
            "height": "100%",
            "autosize": true,
            "symbol": "AAPL",  // Default symbol
            "interval": "D",
            "timezone": "exchange",
            "theme": "dark",
            "style": "0",
            "withdateranges": true,
            "allow_symbol_change": true,
            "save_image": false,
            "details": true,
            "hotlist": true,
            "calendar": true
          }
        </script>
      </div>
      <!-- TradingView Widget END -->
    </div>

    <br>
    <hr><br>
    <hr>

    <div class="stockdata">
      <div class="left">
        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
          <div class="tradingview-widget-container__widget"></div>
          <div class="tradingview-widget-copyright">
            <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
              <span class="blue-text"></span>
            </a>
          </div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js" async>
            {
              "width": "400",
              "height": "550",
              "isTransparent": true,
              "colorTheme": "dark",
              "symbol": "NSE:AAPL",  // Default symbol
              "locale": "en"
            }
          </script>
        </div>
        <!-- TradingView Widget END -->
      </div>

      <div class="right">
        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
          <div class="tradingview-widget-container__widget"></div>
          <div class="tradingview-widget-copyright">
            <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
              <span class="blue-text"></span>
            </a>
          </div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-financials.js" async>
            {
              "isTransparent": true,
              "largeChartUrl": "",
              "displayMode": "regular",
              "width": "100%",
              "height": "100%",
              "colorTheme": "dark",
              "symbol": "NSE:RVNL",  // Default symbol
              "locale": "en"
            }
          </script>
        </div>
        <!-- TradingView Widget END -->
      </div>
    </div>

    <div class="leftbottom">
      <!-- TradingView Widget BEGIN -->
      <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <div class="tradingview-widget-copyright">
          <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
            <span class="blue-text"></span>
          </a>
        </div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
          {
            "interval": "1m",
            "width": "100%",
            "isTransparent": true,
            "height": "100%",
            "symbol": "NSE:RVNL",  // Default symbol
            "showIntervalTabs": true,
            "displayMode": "multiple",
            "locale": "en",
            "colorTheme": "dark"
          }
        </script>
      </div>
      <!-- TradingView Widget END -->
    </div>

    <div class="leftbottom2">
      <!-- TradingView Widget BEGIN -->
      <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js" async>
          {
            "feedMode": "symbol",
            "symbol": "NSE:RVNL",  // Default symbol
            "isTransparent": false,
            "displayMode": "regular",
            "width": "100%",
            "height": "100%",
            "colorTheme": "dark",
            "locale": "en"
          }
        </script>
      </div>
      <!-- TradingView Widget END -->
    </div>

    <div class="heatmaps">
      <h1 class="titles"> Sectors-Overview </h1>
      <!-- TradingView Widget BEGIN -->
      <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget" style="padding: 4vw;position: relative;justify-content: center;"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js" async>
          {
            "exchanges": [],
            "dataSource": "SENSEX",
            "grouping": "sector",
            "blockSize": "market_cap_basic",
            "blockColor": "change",
            "locale": "en",
            "symbolUrl": "",
            "colorTheme": "dark",
            "hasTopBar": false,
            "isDataSetEnabled": false,
            "isZoomEnabled": true,
            "hasSymbolTooltip": true,
            "width": "100%",
            "height": "100%"
          }
        </script>
      </div>
      <!-- TradingView Widget END -->
    </div>

  </div>

  <script>
    function updateCharts() {
      // Get user input from the form or any other source
      var userSymbol = "AAPL"; // Default symbol

      // Update TradingView widget configurations
      var chartConfig = {
        "symbol": userSymbol,
        // Include other properties as needed
      };

      var profileConfig = {
        "symbol": "NSE:" + userSymbol,
        // Include other properties as needed
      };

      var financialsConfig = {
        "symbol": "NSE:" + userSymbol,
        // Include other properties as needed
      };

      var technicalAnalysisConfig = {
        "symbol": "NSE:" + userSymbol,
        // Include other properties as needed
      };

      var timelineConfig = {
        "symbol": "NSE:" + userSymbol,
        // Include other properties as needed
      };

      var heatmapConfig = {
        "exchanges": [],
        "dataSource": "SENSEX",
        "grouping": "sector",
        "blockSize": "market_cap_basic",
        "blockColor": "change",
        "locale": "en",
        "symbolUrl": "",
        "colorTheme": "dark",
        "hasTopBar": false,
        "isDataSetEnabled": false,
        "isZoomEnabled": true,
        "hasSymbolTooltip": true,
      };

      // Update each TradingView widget by updating the script source
      updateWidget("analytics-platform-chart-demo", "embed-widget-advanced-chart.js", chartConfig);
      updateWidget("profile-widget-container__widget", "embed-widget-symbol-profile.js", profileConfig);
      updateWidget("financials-widget-container__widget", "embed-widget-financials.js", financialsConfig);
      updateWidget("technical-analysis-widget-container__widget", "embed-widget-technical-analysis.js", technicalAnalysisConfig);
      updateWidget("timeline-widget-container__widget", "embed-widget-timeline.js", timelineConfig);
      updateWidget("heatmap-widget-container__widget", "embed-widget-stock-heatmap.js", heatmapConfig);
    }

    function updateWidget(containerId, widgetScript, config) {
      // Get the TradingView widget container
      var widgetContainer = document.querySelector("." + containerId);

      // Remove the existing widget
      while (widgetContainer.firstChild) {
        widgetContainer.removeChild(widgetContainer.firstChild);
      }

      // Create a new script element with the updated configuration
      var scriptElement = document.createElement("script");
      scriptElement.type = "text/javascript";
      scriptElement.src = "https://s3.tradingview.com/external-embedding/" + widgetScript;
      scriptElement.async = true;
      scriptElement.innerHTML = JSON.stringify(config);

      // Append the script element to the container
      widgetContainer.appendChild(scriptElement);
    }

    // Initial call to set the default symbols
    updateCharts();
  </script>

</body>
</html>
